import requests
import datetime
import os

SLACK_WEBHOOK_URL = os.getenv('SLACK_WEBHOOK_URL')

def get_dad_joke():
    headers = {'Accept': 'application/json'}
    response = requests.get('https://icanhazdadjoke.com/', headers=headers).json()
    return f"ðŸ˜‚ Dad Joke: {response['joke']}"

def get_fun_fact():
    response = requests.get('https://uselessfacts.jsph.pl/random.json?language=en').json()
    return f"ðŸ¤“ Fun Fact: {response['text']}"

def post_to_slack(message):
    data = {"text": message}
    requests.post(SLACK_WEBHOOK_URL, json=data)

def main():
    joke = get_dad_joke()
    fact = get_fun_fact()
    today = datetime.datetime.now().strftime('%A, %B %d')
    final_message = f"ðŸŽ‰ Happy {today}!\n\n{fact}\n\n{joke}"
    post_to_slack(final_message)

if __name__ == "__main__":
    main()
